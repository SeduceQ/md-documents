# Java对象创建的过程

1. 类加载检查：检查是否已经被加载过、解析过和初始化过。如果没有则执行相应的类加载过程

2. 分配内存：

    > 两种方式
    >
    > 1. 指针碰撞：GC使用标记-整理算法
    > 2. 空闲列表：GC使用标记-清除算法

    > 内存分配并发问题：采用两种方式保证线程安全
    >
    > 1. CAS+失败重试
    > 2. TLAB：为每一个线程预先在Eden区分配一块内存

3. 初始化零值
4. 设置对象头
5. 执行`init`方法：按照程序员的意愿进行初始化

# 四种引用模式

1. 强引用

    不会被回收，内存空间不足会抛出OutOfMemoryError

2. 软引用

    内存空间不足就会被回收

3. 弱引用

    无论空间是否不足都会回收

4. 虚引用

    主要用于跟踪对象被垃圾回收器回收

# 常见的垃圾回收器

|                   | 描述                          | 新生代 | 老年代    | 优点                | 缺点 |
| ----------------- | ----------------------------- | ------ | --------- | ------------------- | ---- |
| Serial            | 单线程收集器                  | 复制   | 标记-整理 | 简单、高效          |      |
| ParNew            | Serial的多线程版本            | 复制   | 标记-整理 | 与CMS收集器配合工作 |      |
| Parallel Scavenge | 关注吞吐量                    | 复制   | 标记-整理 | JDK1.8的默认收集器  |      |
| Serial Old        | Serial的老年代版本            |        |           | 作为CMS的后备方案   |      |
| Parallel Old      | Parallel Scavenge的老年代版本 |        |           |                     |      |
| CMS               | 获取最短回收停顿时间          |        |           | 并发收集、低停顿    |      |
| G1                | 面向服务器                    |        |           | 减少S-T-W的时间     |      |
| ZGC               |                               |        |           |                     |      |